\documentclass[a4paper,11pt,twoside]{memoir}

\setcounter{secnumdepth}{2} % Niveau de profondeur pour la numérotation

\let\STARTCODE\relax 
\let\STOPCODE\relax 
\STARTCODE
\usepackage{color,calc,graphicx,soul}
\definecolor{nicered}{rgb}{.647,.129,.149} \makeatletter
\newlength\dlf@normtxtw \setlength\dlf@normtxtw{\textwidth}
\def\myhelvetfont{\def\sfdefault{mdput}} \newsavebox{\feline@chapter}
\newcommand\feline@chapter@marker[1][4cm]{%
  \sbox\feline@chapter{%
    \resizebox{!}{#1}{\fboxsep=1pt%
      \colorbox{nicered}{\color{white}\bfseries\sffamily\thechapter}%
    }}%
  \rotatebox{90}{%
    \resizebox{%
      \heightof{\usebox{\feline@chapter}}+\depthof{\usebox{\feline@chapter}}}%
    {!}{\scshape\so\@chapapp}}\quad%
  \raisebox{\depthof{\usebox{\feline@chapter}}}{\usebox{\feline@chapter}}%
} \newcommand\feline@chm[1][4cm]{%
  \sbox\feline@chapter{\feline@chapter@marker[#1]}%
  \makebox[0pt][l]{% aka \rlap
    \makebox[1cm][r]{\usebox\feline@chapter}%
  }} \makechapterstyle{daleif1}{
%   \setlength{\beforechapskip}{0pt}
%   \setlength{\midchapskip}{0pt}
  \setlength{\afterchapskip}{10pt}
%   \setlength{\chapindent}{0pt}
  \renewcommand{\insertchapterspace}{}
  \renewcommand\chapnamefont{\normalfont\Large\scshape\raggedleft\so}
  \renewcommand\chaptitlefont{\normalfont\huge\bfseries\scshape\color{nicered}}
  \renewcommand\chapternamenum{} 
  \renewcommand\printchaptername{}
%  \renewcommand\printchapternum{\vspace{-5.5cm}\null\hfill\feline@chm[2.5cm]\par}
  \renewcommand\printchapternum{\vspace{-1.8cm}\null\hfill\feline@chm[2.5cm]\par}
  \renewcommand\afterchapternum{\par\vskip\midchapskip}
  \renewcommand\printchaptertitle[1]{\chaptitlefont\raggedleft
    ##1\par}
%  \renewcommand\printchapternonum{\vspace{-3.5cm}}
  \renewcommand\printchapternonum{\vspace{0.2cm}}
 %  \renewcommand{\insertchapterspace}{}
}

\makeatother
\chapterstyle{daleif1}
\STOPCODE

%%% Fin du modèle de rapport de stage
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\usepackage[a4paper]{geometry} %% CG : à desactiver avec la classe "orsay-thesis"
\geometry{left=3cm,right=3cm,top=2.5cm} % proposition, CG: à désactiver si classe "orsay-thesis" utilisée

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french,english]{babel} % Pour une thèse en français et en anglais
% puis dans le corps du document utiliser...
%\selectlanguage{frenchb} % pour écrire en français
%\selectlanguage{english} % pour écrire en anglais


\usepackage{lipsum} %Pour faire des essais

% Choix de la langue
%\usepackage[greek,english,frenchb]{babel}


% Lmodern et substitution des petites capitales grasses manquantes
\usepackage{lmodern}
\rmfamily
\DeclareFontShape{T1}{lmr}{b}{sc}{<->ssub*cmr/bx/sc}{}
\DeclareFontShape{T1}{lmr}{bx}{sc}{<->ssub*cmr/bx/sc}{}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Modifications Cyril Grouin (nouveaux packages, corrections, adaptations)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% --- Mise en page globale : épigraphe ; lettrine ; mini tables des
%% matières ; numéro des pages des appels de référence dans la
%% bibliographie ; exemples numérotés ; boîtes ovales colorées autour
%% du texte ; séparateur "feuille de vigne"
\usepackage{epigraph}
%\usepackage{lettrine} %% CG: erreurs à la compilation mais fonctionne
\usepackage[french]{minitoc}
\setcounter{minitocdepth}{2} %% CG: Profondeur des niveaux
\usepackage{soul}
\usepackage[pagebackref,colorlinks=true,citecolor=forestgreen,linkcolor=black,menucolor=alezan,urlcolor=prune]{hyperref}
\renewcommand*{\backref}[1]{}
\renewcommand*{\backrefalt}[4]{%
\ifcase #1 %
-- Non cité.%
\or
-- Cité page~#2.%
\else
-- Cité pages~#2.%
\fi}
\renewcommand*{\backrefsep}{, }
\renewcommand*{\backreftwosep}{ et~}
\renewcommand*{\backreflastsep}{ et~}
\usepackage{lingmacros} % CG: exemples numérotés
\usepackage{fancybox} % CG: boîtes ovales dans le texte
\usepackage{pifont} % CG: pour intégrer des caractères spéciaux
\usepackage{dsfont} % CG: pour intégrer des caractères mathématiques
\def\sep{\begin{center}\begin{large}\ding{167}\end{large}\end{center}}

%% --- Noms de sections prédéfinies (bibliographie, liste des figures)
\renewcommand{\bibname}{Bibliographie}
\addto{\captionsenglish}{\renewcommand{\bibname}{Bibliographie}}
\addto{\captionsfrench}{\renewcommand{\listfigurename}{Liste des figures}}

%% --- Mise en forme locale : polices de caractères ; couleurs ;
%% tableaux (fusion de lignes, rotation des labels, tableaux sur
%% plusieurs pages, barre oblique dans une cellule) ; intégration de
%% code informatique ; suppression des espaces devant la ponctuation ;
%% police de caractères Matrix Script Bold en version Regular
%\renewcommand{\rmdefault}{lcm} % Déclaration globale
\usepackage{newcent} % bookman, chancery, charter, newcent, palatino, times, utopia
\usepackage{helvet} % avant, helvet
\usepackage{color}
\usepackage{colortbl}
\usepackage{multirow}
%\usepackage{adjustbox}
\usepackage{longtable}
%\usepackage{slashbox}
\newcommand{\withnofdp}[1]{{\NoAutoSpaceBeforeFDP #1}}
\usepackage{arydshln} %% lignes pointillés dans les tableaux

\usepackage{listings}
\lstset{
  language=XML, 
  basicstyle=\small, % the size of the fonts that are used for the code, footnotesize
  showspaces=false, % show spaces adding particular underscores
  showstringspaces=false, % underline spaces within strings
  breaklines=true, % sets automatic line breaking
  breakatwhitespace=true, % sets if automatic breaks should only happen at whitespace
  morecomment=[s]{<!--}{-->},
  alsoletter=.-,
  commentstyle=\itshape\color{gray},
  markfirstintag=true,
  string=[d]",
  keywords={correction},
  keywordstyle=\color{alizarine},
  stringstyle=\color{acier},
}

%% --- Graphismes (Tikz, PGF) : courbes, histogrammes, cartes
%% mentales, arbres de dépendances ; définitions de codes couleur
%% personnels
\usepackage{tikz}
% \usepackage{tikz-qtree} % CG: pour les arbres
% \usepackage{tikz-dependency} % CG: pour les dépendances
\usepackage{pgfplots}
\usetikzlibrary{mindmap,trees}
\usepackage{filecontents}

\definecolor{acier}{HTML}{3A8EBA}
\definecolor{alezan}{HTML}{A76726}
\definecolor{alizarine}{HTML}{D90115}
\definecolor{amande}{HTML}{82C46C}
\definecolor{ambre}{HTML}{F0C300}
\definecolor{abricot}{HTML}{E67E30}
\definecolor{grey}{rgb}{0.9,0.9,0.9}
\definecolor{gris}{rgb}{0.1,0.1,0.1}
\definecolor{forestgreen}{rgb}{0.13,0.54,0.13}
\definecolor{dockerblue}{rgb}{0.11,0.56,0.98}
\definecolor{orange}{rgb}{0.64,0.16,0.16}
\definecolor{ocre}{HTML}{DFAF2C}
\definecolor{prune}{HTML}{811453}

%% --- Nouvelles commandes spécifiques à ce manuscrit
\newcommand{\remCyril}[1]{\textcolor{dockerblue}{\emph{CG : #1}}}%\color{black}}
\newcommand{\myex}[1]{\color{acier}{\emph{#1}}\color{black}}
\newcommand{\rg}[1]{\textsl{Remarque : #1}}
\def\euro{\mbox{\raisebox{.25ex}{{\it =}}\hspace{-.5em}{\sf C}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%% http://www.developpez.net/forums/d597791/autres-langages/autres-langages/latex/modifier-marge-page-ponctuellement/
%%%% debut macro %%%%
\newenvironment{changemargin}[2]{\begin{list}{}{%
\setlength{\topsep}{0pt}%
\setlength{\leftmargin}{0pt}%
\setlength{\rightmargin}{0pt}%
\setlength{\listparindent}{\parindent}%
\setlength{\itemindent}{\parindent}%
\setlength{\parsep}{0pt plus 1pt}%
\addtolength{\leftmargin}{#1}%
\addtolength{\rightmargin}{#2}%
}\item }{\end{list}}
%%%% fin macro %%%%

\usepackage{chngpage}
%\usepackage{chronology} % Package pourri, ne fonctionne pas avec Babel.
%\usepackage{timeline}
%\usepackage{chronosys} % Superpose les événements trop proches
%\usepackage{ulem} % remplace emph par du souligné


% Interligne
%\renewcommand{\baselinestretch}{1}


% Différents paquets pour les maths
\usepackage{amssymb,amsmath,amsthm,amscd}
\usepackage{mathrsfs}

% Pour les figures
\usepackage{subfig}

%Pour la page de garde
\usepackage{tabularx} % Permet d'utiliser l'environnement tabularx
\usepackage{calc} % Pour pouvoir donner des formules dans les définitions de longueur
\usepackage{graphicx} % Pour inclure des graphiques 
% Attention : pour inclure des .jpg comme dans l'exemple (ou des .png ou .pdf)
% il faut compiler directement en pdf (commande pdflatex).
% Pour inclure des .eps, il faut compiler avec latex + dvips + ps2pdf.

% Pour avoir des liens hypertexte dans le document compilé
\usepackage{hyperref}
%\usepackage{nohyperref} % à utiliser pour pouvoir compiler sans générer des liens

% Pour mettre la bibliographie dans la table des matières avec le bon numéro de page (voir plus loin)
%\usepackage[nottoc]{tocbibind}

% Pour l'index des notations
\usepackage{makeidx}
\makeindex

% Pour la nomenclature
\usepackage[french,intoc,refpage]{nomencl}
\renewcommand{\nomname}{Glossaire}
\renewcommand*{\pagedeclaration}[1]{\unskip\dotfill\hyperpage{#1}}
\makenomenclature


%% Essai pour supprimer l'entrée "Table des matières" de la table des matières
\newcommand{\nocontentsline}[3]{}
\newcommand{\tocless}[2]{\bgroup\let\addcontentsline=\nocontentsline#1{#2}\egroup}




% =========================== Commandes diverses ===============================

% Macros-commandes : appel à des fichiers extérieurs
\input{macros} % macros diverses personnelles 
% (en-têtes et pieds de page, environnements de théorèmes) - voir macros.tex
%\input{macrosmath} % macros mathématiques - voir le fichier macrosmath.tex

% =========================== Commandes et paquets personnels ===============================
%\usepackage{moreverb} % utilisation de verbatimtab
%\usepackage{verbatim} % inclure du code source
\newcommand\tab[1][5mm]{\hspace*{#1}} % Insérer des tabulations.
\parindent=0em % Supprimer les marges en début de paragraphes.
% =========================== Info du document =================================

% \title{Titre du m\'emoire}
% \author{Pr\'enom NOM}


% ================================ Debut du document ===========================

\begin{document}
\sloppy
\dominitoc

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Page de garde
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\include{page-de-garde}

\newpage

% Table des matières
\setcounter{tocdepth}{1} % pour régler sa profondeur - par défaut : 2
\pdfbookmark[0]{Table des matières}{tablematieres} % pour ajouter la table des matières dans l'``index'' du fichier compilé
\tocless\tableofcontents  % pour afficher la table des matières
\newpage

%CG: liste des figures et des tableaux (ajoute trop de pages pour un
%simple mémoire); dans la version "memoir", à la suite de la table des
%matières, sur la même page, donc valable.
\listoffigures
\listoftables
\printnomenclature

%\include{abstract}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% INTRODUCTION
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\chapter*{Introduction}
\adjustmtc
\addstarredchapter{Introduction} 

\section*{Plan de lecture}
Un mémoire de recherche ou un article scientifique se composent
généralement\footnote{Il est accepté que vous, ou votre directeur de
	mémoire, estimiez qu'une autre organisation s'impose pour votre
	problématique de recherche.} des chapitres suivants~:
%
\begin{itemize}
	\item Introduction~: présentation générale du contexte et de la
	problématique traitée, plan suivi dans le mémoire~;
	\item \'Etat de l'art (chapitre~\ref{chap:articles})~: les articles
	qui traitent du même sujet que vous, présentés en un tout cohérent
	\emph{(extraire de chaque article lu les points essentiels et
		présenter dans ce chapitre le résultat de ces lectures en
		regroupant les articles par point essentiel)}~;
	\item Corpus (chapitre~\ref{chap:corpus})~: le corpus utilisé
	\emph{(caractéristiques, pré-traitements appliqués)}~;
	\item Méthodes (chapitre~\ref{chap:methodes})~: les méthodes
	appliquées, avec le détail des expériences réalisées (différentes
	configurations)~;
	\item Résultats (chapitre~\ref{chap:resultats})~: les résultats
	obtenus sur chacune des expériences~;
	\item Discussion (chapitre~\ref{chap:discussion})~: la discussion des
	résultats obtenus (quelle expérience a produit les meilleurs
	résultats, de manière globale, dans le détail des catégories) avec,
	si possible, une analyse des erreurs pour comprendre les
	possibilités d'amélioration~;
	\item Conclusion~: la conclusion globale du mémoire.
\end{itemize}

En règle générale, l'introduction et la conclusion sont les deux
sections de contenu à ne pas être numérotées. Idéalement, chaque
chapitre commence par une introduction rapide et se termine par une
conclusion rapide pour aider le lecteur à mémoriser et comprendre ce
qui a été fait.\newpage

%% TODO: remplacer ce contenu par le vôtre...
\section*{Pr\'esentation g\'en\'erale}

\input{presentation_generale}







%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Première partie

\part{Contexte général}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% ÉTAT DE L'ART
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Nota Bene : il est possible de stocker chaque chapitre dans un
%% fichier *.tex distinct (par exemple pour ce chapitre, de la
%% commande \chapter{} jusqu'à la conclusion de ce chapitre) nommé,
%% par exemple "chapitre-etat-art.tex" qui sera appelé au moyen de la
%% commande suivante (la compilation du fichier *.tex principal
%% compile automatiquement les fichiers inclus) :
%%
%% \include{chapitre-etat-art}

\chapter{\'Etat de l'art}
\label{chap:articles}

%% Ajustement de la mini table des matières du fait de l'introduction
%% non numérotées qui introduit un décalage
\adjustmtc
\minitoc

\section{Introduction}
Dans ce chapitre, nous présentons...

\section{Contenu}
Une section dans ce chapitre avec un appel cliquable de référence
bibliographique~\cite{grouin-2014jbi}.

\section{Conclusion}
Conclusion de ce chapitre.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% MÉTHODES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\chapter{Méthodes}
\label{chap:methodes}
\minitoc

\section{Introduction}
Dans ce chapitre...
\input{methodes_intro}
\input{lilypond}
\input{cplusplus}

\section{Contenu}
Une section dans ce chapitre...
\input{rewriting}
\input{separation_voix}

\section{Conclusion}
Conclusion de ce chapitre.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Deuxième partie

\part{Expérimentations}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% CORPUS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\chapter{Corpus}
\label{chap:corpus}
\minitoc

\section{Introduction}
Dans ce chapitre...
\input{groove}
\input{transcriptions}

\section{Contenu}
Une section dans ce chapitre...

\section{Conclusion}
Conclusion de ce chapitre.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% RÉSULTATS
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Résultats}
\label{chap:resultats}
\minitoc

\section{Introduction}
Dans ce chapitre...

\section{Contenu}
Une section dans ce chapitre...

\section{Conclusion}
Conclusion de ce chapitre.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% DISCUSSION
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\chapter{Discussion}
\label{chap:discussion}
\minitoc

\section{Introduction}
Dans ce chapitre...

\section{Contenu}
Une section dans ce chapitre...

\section{Conclusion}
Conclusion de ce chapitre.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% CONCLUSION
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\cleardoublepage\pdfbookmark[-1]{Conclusion générale}{conclusion} %% CG: lien dans le PDF hors d'une partie
\chapter*{Conclusion générale}
\adjustmtc
\addstarredchapter{Conclusion générale} 

Dans ce mémoire, nous avons traité de la problématique...


% ================================== BIBLIOGRAPHIE =============================

\cleardoublepage\pdfbookmark[-1]{Bibliographie}{bibliography}
%\selectlanguage{english} 
\bibliographystyle{apalike} % style alphabétique en français
\bibliography{biblio} % pour afficher la biblio
\selectlanguage{french} 

\appendix
\cleardoublepage\pdfbookmark[-1]{Annexes}{appendix}
%% TODO: mettre en commentaires les annexes, ou remplacer l'appel de
%% fichier *.tex par votre fichier d'annexe.
\include{documentation}
\include{principes}


% =============================== INDEX DES NOTATIONS ==========================

\cleardoublepage % pour forcer l'index à apparaître sur une page impaire
\pdfbookmark[-1]{Index}{index}
\printindex % pour afficher l'index

%% \newpage
%% \thispagestyle{empty}
%% \mbox{}

\end{document}
